<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    

    <title>
      2.react轮播图项目开写 | 高大秀博客 
    </title>

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    
      <meta name="author" content="高大秀">
    
    

    <meta name="description" content="关于react轮播图的源码,无缝版已上传至github,https://github.com/gaodaxiu0406/React-Slider  用react+webpack写一个的轮播图项目(项目配置请看上篇react轮播图项目配置及原理概要) 先将整个文件写在一个文件中,1.画结构 新建一个components文件夹 components文件夹下新建Slider.js文件和Slider.l">
<meta name="keywords" content="react轮播图">
<meta property="og:type" content="article">
<meta property="og:title" content="2.react轮播图项目开写 | 高大秀博客">
<meta property="og:url" content="http://yoursite.com/2017/07/31/2-react轮播图项目开写/index.html">
<meta property="og:site_name" content="高大秀博客">
<meta property="og:description" content="关于react轮播图的源码,无缝版已上传至github,https://github.com/gaodaxiu0406/React-Slider  用react+webpack写一个的轮播图项目(项目配置请看上篇react轮播图项目配置及原理概要) 先将整个文件写在一个文件中,1.画结构 新建一个components文件夹 components文件夹下新建Slider.js文件和Slider.l">
<meta property="og:updated_time" content="2017-08-18T13:08:08.401Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="2.react轮播图项目开写 | 高大秀博客">
<meta name="twitter:description" content="关于react轮播图的源码,无缝版已上传至github,https://github.com/gaodaxiu0406/React-Slider  用react+webpack写一个的轮播图项目(项目配置请看上篇react轮播图项目配置及原理概要) 先将整个文件写在一个文件中,1.画结构 新建一个components文件夹 components文件夹下新建Slider.js文件和Slider.l">
    
    
    
      <link rel="icon" type="image/x-icon" href="/favicon.jpg">
    
    <link rel="stylesheet" href="/css/uno.css">
    <link rel="stylesheet" href="/css/highlight.css">
    <link rel="stylesheet" href="/css/archive.css">
    <link rel="stylesheet" href="/css/china-social-icon.css">

</head>
<body>

    <span class="mobile btn-mobile-menu">
        <i class="icon icon-list btn-mobile-menu__icon"></i>
        <i class="icon icon-x-circle btn-mobile-close__icon hidden"></i>
    </span>

    

<header class="panel-cover panel-cover--collapsed">


  <div class="panel-main">

  
    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        

        <h1 class="panel-cover__title panel-title"><a href="/" title="link to homepage">高大秀博客</a></h1>
        <hr class="panel-cover__divider" />

        
        <div class="icon-avatar">
            <span class="icon">
                <div class="icon-avatar-bg"></div>
            </span>

        </div>

        <div class="navigation-wrapper">

          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">


              
                
                <li class="navigation__item"><a href="/#blog" title="" class="blog-button">首页</a></li>
              
                
                <li class="navigation__item"><a href="/about" title="" class="">关于</a></li>
              
                
                <li class="navigation__item"><a href="/archive" title="" class="">归档</a></li>
              

            </ul>
          </nav>

          <!-- ----------------------------
To add a new social icon simply duplicate one of the list items from below
and change the class in the <i> tag to match the desired social network
and then add your link to the <a>. Here is a full list of social network
classes that you can use:

    icon-social-500px
    icon-social-behance
    icon-social-delicious
    icon-social-designer-news
    icon-social-deviant-art
    icon-social-digg
    icon-social-dribbble
    icon-social-facebook
    icon-social-flickr
    icon-social-forrst
    icon-social-foursquare
    icon-social-github
    icon-social-google-plus
    icon-social-hi5
    icon-social-instagram
    icon-social-lastfm
    icon-social-linkedin
    icon-social-medium
    icon-social-myspace
    icon-social-path
    icon-social-pinterest
    icon-social-rdio
    icon-social-reddit
    icon-social-skype
    icon-social-spotify
    icon-social-stack-overflow
    icon-social-steam
    icon-social-stumbleupon
    icon-social-treehouse
    icon-social-tumblr
    icon-social-twitter
    icon-social-vimeo
    icon-social-xbox
    icon-social-yelp
    icon-social-youtube
    icon-social-zerply
    icon-mail

-------------------------------->

<!-- add social info here -->



        </div>

      </div>

    </div>

    <div class="panel-cover--overlay"></div>
  </div>
</header>

    <div class="content-wrapper">
        <div class="content-wrapper__inner entry">
            

<article class="post-container post-container--single">

  <header class="post-header">
    
    <h1 class="post-title">2.react轮播图项目开写</h1>

    

    <div class="post-meta">
      <time datetime="2017-07-31" class="post-meta__date date">2017-07-31</time>
      <span class="post-meta__tags tags">

          

          
             &#8226; 标签:
            <font class="tags">
              <a class="tags-link" href="/tags/react轮播图/">react轮播图</a>
            </font>
          
      </span>


      <span id="busuanzi_container_page_pv">
  本文总阅读量<span id="busuanzi_value_page_pv"></span>次
</span>
    </div>
    
    

  </header>

  <section id="post-content" class="article-content post">
    <blockquote>
<p>关于react轮播图的源码,无缝版已上传至github,<a href="https://github.com/gaodaxiu0406/React-Slider" target="_blank" rel="external">https://github.com/gaodaxiu0406/React-Slider</a></p>
</blockquote>
<h2 id="用react-webpack写一个的轮播图项目-项目配置请看上篇react轮播图项目配置及原理概要"><a href="#用react-webpack写一个的轮播图项目-项目配置请看上篇react轮播图项目配置及原理概要" class="headerlink" title="用react+webpack写一个的轮播图项目(项目配置请看上篇react轮播图项目配置及原理概要)"></a>用react+webpack写一个的轮播图项目(项目配置请看上篇react轮播图项目配置及原理概要)</h2><ul>
<li>先将整个文件写在一个文件中,<h2 id="1-画结构"><a href="#1-画结构" class="headerlink" title="1.画结构"></a>1.画结构</h2></li>
<li>新建一个components文件夹</li>
<li>components文件夹下新建Slider.js文件和Slider.less文件(Slider.less文件是用来给Slider.js写样式的)</li>
</ul>
<h2 id="2-在indix-js中引入组件-渲染到页面中"><a href="#2-在indix-js中引入组件-渲染到页面中" class="headerlink" title="2.在indix.js中引入组件 渲染到页面中"></a>2.在indix.js中引入组件 渲染到页面中</h2><ul>
<li><p>打开src文件夹中的index.html文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;div id=&quot;root&quot;&gt;&lt;/div&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>2-1).在这个id为root的标签中渲染元素</p>
</li>
<li><p>2-2).回到index.js中,写一个轮播图组件，渲染到index.html中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">import React from &apos;react&apos;;</div><div class="line">import ReactDOM from &apos;react-dom&apos;;</div><div class="line">import Slider from &apos;./components/Slider&apos;;</div><div class="line">let images=[</div><div class="line">    &#123;src:require(&apos;./images/1.jpg&apos;)&#125;,</div><div class="line">    &#123;src:require(&apos;./images/2.jpg&apos;)&#125;,</div><div class="line">    &#123;src:require(&apos;./images/3.jpg&apos;)&#125;,</div><div class="line">    &#123;src:require(&apos;./images/4.jpg&apos;)&#125;</div><div class="line">];</div><div class="line">ReactDOM.render(&lt;Slider images=&#123;images&#125;/&gt;,document.querySelector(&apos;#root&apos;));</div></pre></td></tr></table></figure>
</li>
<li><p>解释1)引入React，引入ReactDOM，引入Slider组件 然后通过ReactDOM.render将Slider组件渲染到index.html的id为root的div标签中</p>
</li>
<li>解释2)Slider组件需要图片参数<ul>
<li>src文件夹下新建一个images文件夹，存入轮播的图片</li>
<li>将图片路径通过require存入images数组中</li>
<li>通过组件Slider标签将所需的images参数传入组件Slider(让images参数变量等于images数组)</li>
</ul>
</li>
</ul>
<h2 id="3-开始写Slider-js中的代码"><a href="#3-开始写Slider-js中的代码" class="headerlink" title="3.开始写Slider.js中的代码"></a>3.开始写Slider.js中的代码</h2><ul>
<li><p>需要默认导出一个组件Slider供外面文件(index.js)调用;还需要接收一个images属性进行轮播</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">import React from &apos;react&apos;;</div><div class="line">import ReactDOM from &apos;react-dom&apos;;</div><div class="line">require(&apos;./Slider.less&apos;);</div><div class="line">export default class Slider extends React.Component&#123;</div><div class="line">    render()&#123;</div><div class="line">        let images=this.props.images;</div><div class="line">        return(</div><div class="line">            &lt;div className=&quot;slider-wrapper&quot;&gt;</div><div class="line">                &lt;ul className=&quot;sliders&quot;&gt;</div><div class="line">                    &#123;       images.map((image,index)=&gt;(</div><div class="line">                    &lt;li className=&quot;slider&quot;&gt;</div><div class="line">                    &lt;img src=&#123;image.src&#125;/&gt;</div><div class="line">                    &lt;/li&gt;</div><div class="line">                        ))</div><div class="line">                    &#125;</div><div class="line">                &lt;/ul&gt;</div><div class="line">            &lt;/div&gt;</div><div class="line">        )</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>1)<code>require(&#39;./Slider.less&#39;);</code>–&gt;这里引入Slider.less用import和require都是一样的效果，都是加载一个模块的意思,模块可能是图片，可能是less/css/js/json文件,都可以–&gt;在webpack中一切皆模块,不管是什么资源，都可以作为模块来加载</p>
</li>
<li>2)li的数量取决于images数据,images中有几张图片，就有几个li<ul>
<li>在render中let一个变量images来接收index.js传入的images,然后用map方法遍历整个数组</li>
</ul>
</li>
<li><p>在Slider.less中写好轮播图的样式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">*&#123;</div><div class="line">  padding: 0;</div><div class="line">  margin: 0;</div><div class="line">&#125;</div><div class="line">ul,li&#123;</div><div class="line">  list-style: none;</div><div class="line">&#125;</div><div class="line">.wrapper&#123;</div><div class="line">  width: 400px;</div><div class="line">  height: 400px;</div><div class="line">  position: relative;</div><div class="line">  margin: 30px auto;</div><div class="line">  .sliders&#123;</div><div class="line">    height: 400px;</div><div class="line">    position: absolute;</div><div class="line">    left:0;</div><div class="line">    .slider&#123;</div><div class="line">      float: left;</div><div class="line">      width: 400px;</div><div class="line">      height: 400px;</div><div class="line">      img&#123;</div><div class="line">        width: 100%;</div><div class="line">        height: 100%;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>宽高为400px的轮播图</p>
</li>
</ul>
<h2 id="4-写配置文件"><a href="#4-写配置文件" class="headerlink" title="4.写配置文件"></a>4.写配置文件</h2><ul>
<li><p>在webpack.config.js中加loaders</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">module:&#123;</div><div class="line">        loaders:[</div><div class="line">            &#123;test:/\.js$/,loader:&apos;babel-loader&apos;,exclude:/node_modules/&#125;,</div><div class="line">            &#123;test:/\.less$/,loader:&apos;style-loader!css-loader!less-loader&apos;&#125;,</div><div class="line">            &#123;test:/\.(jpg|png|gif)$/,loader:&apos;url-loader&apos;&#125;</div><div class="line">        ]</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>babel默认情况下什么都不做，需要一个配置文件.babelrc文件</p>
<ul>
<li>新建一个.babelrc配置文件<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;presets&quot;: [&quot;es2015&quot;,&quot;stage-0&quot;,&quot;react&quot;]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>presets预设,”es2015”将es6编译成es5,”stage-0”将es7编译成es5,”react”将react编译成es5</p>
</li>
<li>原理1:<code>{test:/\.js$/,loader:&#39;babel-loader&#39;,exclude:/node_modules/}</code>–&gt;处理(编译)js文件:如果发现文件是js,用babel-loader加载,加载的时候需要读配置文件.babelrc,如果代码时es6/es7/react都要通过babel转成es5;同时通过exclude将node_modules文件夹下的所有js文件排除掉</li>
<li>原理2:<code>{test:/\.less$/,loader:&#39;style-loader!css-loader!less-loader&#39;}</code>–&gt;如果发现文件以.less结尾的,第一步通过less-loader将less编译成css,然后通过css-loader进行加载,然后通过style-loader将他通过style标签的形式插入到页面中去，变成一个行内样式</li>
<li>原理3:<code>{test:/\.(jpg|png|gif)$/,loader:&#39;url-loader&#39;}</code>–&gt;凡是资源文件都可以用url-loader来加载,不论是图片、图标、字体、视频、音频;后面可以通过问号传参,有个参数limit(例如:<code>{test:/\.(jpg|png|gif)$/,loader:&#39;url-loader?limit=8192&#39;}</code>–&gt;小于8K的资源文件将直接以base64的形式内联在代码中，可以减少一次http请求)</li>
</ul>
<h3 id="此时执行npm-run-build-将代码打包到出口文件中-打开build文件夹下的index-html文件就可以直接预览效果了"><a href="#此时执行npm-run-build-将代码打包到出口文件中-打开build文件夹下的index-html文件就可以直接预览效果了" class="headerlink" title="此时执行npm run build,将代码打包到出口文件中,打开build文件夹下的index.html文件就可以直接预览效果了"></a>此时执行<code>npm run build</code>,将代码打包到出口文件中,打开build文件夹下的index.html文件就可以直接预览效果了</h3><ul>
<li><p>此时会发现控制台有个报错</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Warning: Each child in an array or iterator should have a unique &quot;key&quot; prop. Check the render method of `Slider`. See https://fb.me/react-warning-keys for more information.</div><div class="line">    in li (created by Slider)</div><div class="line">    in Slider</div></pre></td></tr></table></figure>
</li>
<li><p>需要唯一的key属性,在Slider.js文件中的li需要唯一的key属性，给li标签加上key属性即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;li className=&quot;slider&quot; key=&#123;index&#125;&gt;                  &lt;img src=&#123;image.src&#125;/&gt;        &lt;/li&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>关掉浏览器,重新执行<code>npm run build</code>，再打开build文件夹下的index.html文件预览,控制台就没有报错了</p>
</li>
</ul>
<h2 id="5-写功能"><a href="#5-写功能" class="headerlink" title="5.写功能"></a>5.写功能</h2><ul>
<li><p>让图片动起来,需要给Slider.js加个状态,需要有个定时器让他动起来 写在周期函数componentDidMount中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">constructor()&#123;</div><div class="line">        super();</div><div class="line">        this.state=&#123;pos:0&#125;;//默认索引</div><div class="line">    &#125;</div><div class="line">    componentDidMount()&#123;</div><div class="line">        this.$timer=setInterval(()=&gt;&#123;</div><div class="line">            let pos=this.state.pos;</div><div class="line">            pos++;//每隔2s让pos加1，pos值影响ul的左偏移量left的值 所以ul应该有个style属性 left值应该变化</div><div class="line">            this.setState(&#123;pos:pos&#125;)</div><div class="line"></div><div class="line">        &#125;,this.props.interval*1000)</div></pre></td></tr></table></figure>
</li>
<li><p>pos++;–&gt;每隔2s让pos加1，pos值影响ul的左偏移量left的值 所以ul应该有个style属性 left值应该变化</p>
<ul>
<li>ul应该有个style属性<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">render()&#123;</div><div class="line">        let images=this.props.images;</div><div class="line">        let style=&#123;</div><div class="line">            width:400*images.length,</div><div class="line">            left:this.state.pos*-400</div><div class="line">        &#125;;</div><div class="line">        return(</div><div class="line">            &lt;div className=&quot;slider-wrapper&quot;&gt;</div><div class="line">                &lt;ul style=&#123;style&#125; className=&quot;sliders&quot;&gt;</div><div class="line">                    &#123;</div><div class="line">                        images.map((image,index)=&gt;(</div><div class="line">                            &lt;li className=&quot;slider&quot; key=&#123;index&#125;&gt;</div><div class="line">                                &lt;img src=&#123;image.src&#125;/&gt;</div><div class="line">                            &lt;/li&gt;</div><div class="line">                        ))</div><div class="line">                    &#125;</div><div class="line"></div><div class="line">                &lt;/ul&gt;</div><div class="line">            &lt;/div&gt;</div><div class="line">        )</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>this.props.interval*1000–&gt;每隔2s轮播一次,需要有变量传进来–&gt;在index.js中新增一个interval变量(间隔时间让外面可以控制)</p>
<ul>
<li>1).这里通过this.props获取index.js中传递进来的的interval变量<code>this.props.interval*1000</code></li>
<li>2).index.js中新增一个interval变量<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">ReactDOM.render(</div><div class="line">    &lt;Slider</div><div class="line">        images=&#123;images&#125;</div><div class="line">        interval=&#123;2&#125;</div><div class="line">    /&gt;,document.querySelector(&apos;#root&apos;));</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h3 id="写功能步骤总结"><a href="#写功能步骤总结" class="headerlink" title="写功能步骤总结:"></a>写功能步骤总结:</h3><ul>
<li>第一步:定义一个默认索引pos,默认值是0</li>
<li>第二步:在组件加载完成之后创建定时器setInterval赋给this.$timer</li>
<li>第三步:每隔2s让图片向左偏移一个宽度的距离(interval是外界传进来的,是图片轮播的间隔时间),在index中要给组件Slider传进来一个2,2*1000意味着2s变一次</li>
<li>this.$timer中先取出老的pos值，第一次轮播pos就是0，然后pos++，pos变成1，然后setState重新设置pos值,让pos值往上</li>
<li>pos会影响ul的left值，一张图片的宽度是400px，向左偏移400，就是*-400</li>
<li>ul的宽度应该是宽度400乘以图片的数量images.length,4张图就是1600px<h3 id="执行npm-run-dev"><a href="#执行npm-run-dev" class="headerlink" title="执行npm run dev"></a>执行<code>npm run dev</code></h3></li>
<li>注意,执行<code>npm run dev</code>可自动将文件编译更新打包到出口文件index.html中，并且只要更改文件，页面就会自动刷新,但是如果更改配置文件,需要重新启动<code>npm run dev</code>服务</li>
<li>此时执行<code>npm run dev</code>命令,轮播图就动起来了，但是越界了,因为此时还没有做边界处理</li>
</ul>
<h2 id="7-完善功能"><a href="#7-完善功能" class="headerlink" title="7.完善功能"></a>7.完善功能</h2><ul>
<li><p>将Slider需要的属性(可外界控制的)，在index.js的Slider组件标签中传入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">ReactDOM.render(</div><div class="line">    &lt;Slider</div><div class="line">        images=&#123;images&#125;//图片</div><div class="line">        interval=&#123;2&#125;//多长时间轮播一次</div><div class="line">        speed=&#123;1&#125;//每次轮播的速度</div><div class="line">        pause=&#123;true&#125;//当鼠标移动上去之后自动暂停</div><div class="line">        autoplay=&#123;true&#125;//是否启用自动轮播，false不自动轮播</div><div class="line">                                  - 在Slider.js中</div><div class="line">        dots=&#123;true&#125;//是否有点状导航</div><div class="line">        arrows=&#123;true&#125;//是否有箭头导航</div><div class="line">    /&gt;,document.querySelector(&apos;#root&apos;));</div></pre></td></tr></table></figure>
</li>
<li><p>添加<code>transitionDuration</code>–&gt;规定完成过渡效果需要花费的时间 speed默认值是1 这里就是1s</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">let style=&#123;</div><div class="line">            width:400*images.length,</div><div class="line">            left:this.state.pos*-400,</div><div class="line">            transitionDuration:this.props.speed+&apos;s&apos;</div><div class="line">        &#125;;</div></pre></td></tr></table></figure>
</li>
<li><p>在Slider.js的周期函数中添加一个判断</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">componentDidMount()&#123;</div><div class="line">    if(this.props.autoPlay)&#123;</div><div class="line">        this.$timer=setInterval(()=&gt;&#123;</div><div class="line">            let pos=this.state.pos;</div><div class="line">            pos++;</div><div class="line">            this.setState(&#123;pos:pos&#125;)</div><div class="line">        &#125;,this.props.interval*1000)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>this.props.autoPlay 是否自动轮播 如果外界传入true就是自动轮播，传入false就是不自动轮播</p>
</li>
</ul>
<h2 id="8-将轮播切换单独拎出来写成一个方法turn"><a href="#8-将轮播切换单独拎出来写成一个方法turn" class="headerlink" title="8.将轮播切换单独拎出来写成一个方法turn"></a>8.将轮播切换单独拎出来写成一个方法turn</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">turn(n)&#123;</div><div class="line">    let pos=this.state.pos;</div><div class="line">    pos+=n;</div><div class="line">    this.setState(&#123;pos:pos&#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><p>或者使用es6的箭头函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">turn=(n)=&gt;&#123;</div><div class="line">        let pos=this.state.pos;</div><div class="line">        pos+=n;</div><div class="line">        this.setState(&#123;pos:pos&#125;)</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
</li>
<li><p><code>let pos=this.state.pos;</code>获取旧索引</p>
</li>
<li>turn表示切换,n表示切换的步长,方便以后操作:例如往左走传1进来即可，往右走传-1进来即可</li>
<li>那么此时在周期函数中,直接调用这个turn方法即可,默认往右轮播，传入-1<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">componentDidMount()&#123;</div><div class="line">    if(this.props.autoplay)&#123;</div><div class="line">        this.timer=setInterval(()=&gt;&#123;</div><div class="line">            this.turn(1);</div><div class="line">        &#125;,this.props.interval*1000)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="9-实现鼠标移上去停止轮播"><a href="#9-实现鼠标移上去停止轮播" class="headerlink" title="9.实现鼠标移上去停止轮播"></a>9.实现鼠标移上去停止轮播</h2><ul>
<li>给div加onMouseOver和onMouseOut事件<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;ul onMouseOver=&#123;()=&gt;clearInterval(this.timer)&#125; onMouseOut=&#123;this.play&#125; style=&#123;style&#125; className=&quot;sliders&quot;&gt;</div><div class="line">...</div><div class="line">&lt;/ul&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="10-自动轮播部分也封装成一个函数play"><a href="#10-自动轮播部分也封装成一个函数play" class="headerlink" title="10.自动轮播部分也封装成一个函数play"></a>10.自动轮播部分也封装成一个函数play</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">play=()=&gt;&#123;</div><div class="line">        this.timer=setInterval(()=&gt;&#123;</div><div class="line">            this.turn(1);</div><div class="line">        &#125;,this.props.interval*1000)</div><div class="line">    &#125;;</div></pre></td></tr></table></figure>
<ul>
<li>play表示开启定时器进行自动轮播</li>
<li>那么此时在周期函数中直接调用<code>this.play()</code>即可<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">componentDidMount()&#123;</div><div class="line">    if(this.props.autoplay)&#123;</div><div class="line">        this.play();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="11-边界判断"><a href="#11-边界判断" class="headerlink" title="11.边界判断"></a>11.边界判断</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">turn=(n)=&gt;&#123;</div><div class="line">        let pos=this.state.pos;</div><div class="line">        pos+=n;</div><div class="line">        if(pos&gt;=this.props.images.length)&#123;</div><div class="line">            pos=0;</div><div class="line">        &#125;</div><div class="line">        this.setState(&#123;pos:pos&#125;)</div><div class="line">    &#125;;</div></pre></td></tr></table></figure>
<ul>
<li>当索引为图片总张数的时候 让索引变为0<h2 id="12-写左右箭头"><a href="#12-写左右箭头" class="headerlink" title="12.写左右箭头"></a>12.写左右箭头</h2></li>
<li><p>在ul下加一个div</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;div className=&quot;arrows&quot;&gt;</div><div class="line">                    &lt;span className=&quot;arrow-left&quot;&gt;&amp;lt;&lt;/span&gt;</div><div class="line">                    &lt;span className=&quot;arrow-right&quot;&gt;&amp;gt;&lt;/span&gt;</div><div class="line">                &lt;/div&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>在Slider.less中写样式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">.arrows&#123;</div><div class="line">  position: absolute;</div><div class="line">  width: 100%;</div><div class="line">  height: 20px;</div><div class="line">  top:50%;</div><div class="line">  margin-top:-10px;</div><div class="line">  .arrow&#123;</div><div class="line">    width: 20px;</div><div class="line">    height: 20px;</div><div class="line">    line-height: 20px;</div><div class="line">    text-align: center;</div><div class="line">    cursor: pointer;</div><div class="line">    font-size: 30px;</div><div class="line">    background-color: #eee;</div><div class="line">    &amp;:hover&#123;</div><div class="line">      background-color: #999;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  .arrow-left&#123;</div><div class="line">    margin-left: 5px;</div><div class="line">    float: left;</div><div class="line">  &#125;</div><div class="line">  .arrow-right&#123;</div><div class="line">    margin-right: 5px;</div><div class="line">    float: right;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>给左右arrow绑定事件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;div className=&quot;arrows&quot;&gt;</div><div class="line">    &lt;span onClick=&#123;()=&gt;this.turn(-1)&#125; className=&quot;arrow arrow-left&quot;&gt;&amp;lt;&lt;/span&gt;</div><div class="line">    &lt;span onClick=&#123;()=&gt;this.turn(1)&#125; className=&quot;arrow arrow-right&quot;&gt;&amp;gt;&lt;/span&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="13-处理左边界"><a href="#13-处理左边界" class="headerlink" title="13.处理左边界"></a>13.处理左边界</h2><ul>
<li><p>在turn中做个判断</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">turn=(n)=&gt;&#123;</div><div class="line">    let pos=this.state.pos;</div><div class="line">    pos+=n;</div><div class="line">    if(pos&gt;=this.props.images.length)&#123;</div><div class="line">        pos=0;</div><div class="line">    &#125;</div><div class="line">    if(pos&lt;0)&#123;</div><div class="line">        pos=this.props.images.length-1;</div><div class="line">    &#125;</div><div class="line">    this.setState(&#123;pos:pos&#125;)</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
</li>
<li><p>当索引小于0的时候,让索引等于images的长度-1</p>
</li>
</ul>
<h2 id="14-根据传进来的arrows值判断是否有左右箭头切换效果"><a href="#14-根据传进来的arrows值判断是否有左右箭头切换效果" class="headerlink" title="14.根据传进来的arrows值判断是否有左右箭头切换效果"></a>14.根据传进来的arrows值判断是否有左右箭头切换效果</h2><ul>
<li><p>第一种方法(看着比较乱)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">                    this.props.arrows?&lt;div className=&quot;arrows&quot;&gt;</div><div class="line">                        &lt;span onClick=&#123;()=&gt;this.turn(-1)&#125; className=&quot;arrow arrow-left&quot;&gt;&amp;lt;&lt;/span&gt;</div><div class="line">                        &lt;span onClick=&#123;()=&gt;this.turn(1)&#125; className=&quot;arrow arrow-right&quot;&gt;&amp;gt;&lt;/span&gt;</div><div class="line">                    &lt;/div&gt;:null</div><div class="line">                &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>第二种,在render中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">let arrows=null;</div><div class="line">        if(this.props.arrows)&#123;</div><div class="line">            arrows=(</div><div class="line">                &lt;div className=&quot;arrows&quot;&gt;</div><div class="line">                    &lt;span onClick=&#123;()=&gt;this.turn(-1)&#125; className=&quot;arrow arrow-left&quot;&gt;&amp;lt;&lt;/span&gt;</div><div class="line">                    &lt;span onClick=&#123;()=&gt;this.turn(1)&#125; className=&quot;arrow arrow-right&quot;&gt;&amp;gt;&lt;/span&gt;</div><div class="line">                &lt;/div&gt;</div><div class="line">            )</div><div class="line">        &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>那么ul下面就可以直接用{arrows}代替了(看着很清晰明了)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;div className=&quot;slider-wrapper&quot;&gt;</div><div class="line">                &lt;ul onMouseOver=&#123;()=&gt;clearInterval(this.timer)&#125; onMouseOut=&#123;this.play&#125; style=&#123;style&#125; className=&quot;sliders&quot;&gt;</div><div class="line">                    &#123;</div><div class="line">                        images.map((image,index)=&gt;(</div><div class="line">                            &lt;li className=&quot;slider&quot; key=&#123;index&#125;&gt;</div><div class="line">                                &lt;img src=&#123;image.src&#125;/&gt;</div><div class="line">                            &lt;/li&gt;</div><div class="line">                        ))</div><div class="line">                    &#125;</div><div class="line">                &lt;/ul&gt;</div><div class="line">            &#123;arrows&#125;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="15-根据传进来的dots值判断是否有点状导航"><a href="#15-根据传进来的dots值判断是否有点状导航" class="headerlink" title="15.根据传进来的dots值判断是否有点状导航"></a>15.根据传进来的dots值判断是否有点状导航</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">let dots=null;</div><div class="line">        if(this.props.dots)&#123;</div><div class="line">            dots=(</div><div class="line">                &lt;div className=&quot;dots&quot;&gt;</div><div class="line">                    &#123;</div><div class="line">                        images.map((image,index)=&gt;(</div><div class="line">                            &lt;span className=&quot;dot&quot; key=&#123;index&#125;&gt;&lt;/span&gt;</div><div class="line">                        ))</div><div class="line">                    &#125;</div><div class="line">                &lt;/div&gt;</div><div class="line">            )</div><div class="line">        &#125;</div></pre></td></tr></table></figure>
<ul>
<li>dots直接放到最下面即可<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line">&#123;arrows&#125;</div><div class="line">&#123;dots&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="15-1-在Slider-less中写dots的样式"><a href="#15-1-在Slider-less中写dots的样式" class="headerlink" title="15-1.在Slider.less中写dots的样式"></a>15-1.在Slider.less中写dots的样式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">.dots&#123;</div><div class="line">  width: 100%;</div><div class="line">  height: 20px;</div><div class="line">  position: absolute;</div><div class="line">  bottom: 10px;</div><div class="line">  text-align: center;</div><div class="line">  .dot&#123;</div><div class="line">    display: inline-block;</div><div class="line">    width: 20px;</div><div class="line">    height: 20px;</div><div class="line">    border-radius: 50%;</div><div class="line">    margin-left: 5px;</div><div class="line">    background-color: #abcdef;</div><div class="line">    cursor: pointer;</div><div class="line">    &amp;:hover&#123;</div><div class="line">      background-color: #999999;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="16-点状导航的点击跟随事件"><a href="#16-点状导航的点击跟随事件" class="headerlink" title="16.点状导航的点击跟随事件"></a>16.点状导航的点击跟随事件</h2><ul>
<li>给span加onClick事件<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">···</div><div class="line">&lt;span className=&quot;dot&quot; key=&#123;index&#125; onClick=&#123;()=&gt;this.turn(index-this.props.pos)&#125;&gt;&lt;/span&gt;</div><div class="line">···</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="16-1-轮播点状导航自动跟随事件"><a href="#16-1-轮播点状导航自动跟随事件" class="headerlink" title="16-1.轮播点状导航自动跟随事件"></a>16-1.轮播点状导航自动跟随事件</h3><ul>
<li><p>在Slider.less中加一个active样式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">.active&#123;</div><div class="line">    background-color: #999999;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>给span标签添加active属性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;span className=&#123;&quot;dot &quot;+(index==this.state.pos?&apos;active&apos;:&apos;&apos;)&#125; key=&#123;index&#125; onClick=&#123;()=&gt;this.turn(index-this.state.pos)&#125;&gt;&lt;/span&gt;</div></pre></td></tr></table></figure>
</li>
</ul>

  </section>

  <section class="post-comments">
    <div class="icon-shangyin">
        赏
        <div class="text">
            <span class="weixin">
                <i></i>
                <b>微信</b>
            </span>
            <span class="zhifubao">
                <i></i>
                <b>支付宝</b>
            </span>
            <b>感谢赏我一个棒棒糖哦~~</b>
            <i class="footer"></i>
        </div>

    </div>

    <!-- 将评论系统（例如Disqus、多说、友言、畅言等）提供的代码片段粘贴在这里 -->

</section>
<section class="post-comments hashover" id="comments">
    <script type = "text/javascript">(
            function() {
                var s = document.createElement('script'),
                    t = document.getElementsByTagName('script')[0];
                s.type = 'text/javascript';
                s.async = true;
                s.src = "/hashover/hashover.js";
                t.parentNode.insertBefore(s, t);
            })();
    </script>
    <div id="hashover"></div>
</section>


</article>


            <footer class="footer">
<span id="busuanzi_container_site_pv">
    本站总访问量<span id="busuanzi_value_site_pv"></span>次
</span>
    <span class="footer__copyright">
        &copy; 作者 : 高大秀 |
        主题:<a href="https://github.com/someus/huno">Huno</a>
        <span>&nbsp;&nbsp;文章所有权归作者所有,如需引用,请标明出处。</span>
    </span>
    
</footer>
<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
        </div>
    </div>

    <!-- js files -->
    <script src="/js/jquery.min.js"></script>
    <script src="/js/main.js"></script>
    <script src="/js/scale.fix.js"></script>
    

    

    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript"> 
        $(document).ready(function(){
            MathJax.Hub.Config({ 
                tex2jax: {inlineMath: [['[latex]','[/latex]'], ['\\(','\\)']]} 
            });
        });
    </script>


    

    <script src="/js/awesome-toc.min.js"></script>
    <script>
        $(document).ready(function(){
            $.awesome_toc({
                overlay: true,
                contentId: "post-content",
            });
        });
    </script>


    
    
    <!--kill ie6 -->
<!--[if IE 6]>
  <script src="//letskillie6.googlecode.com/svn/trunk/2/zh_CN.js"></script>
<![endif]-->

</body>
</html>
